<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>CompExpand.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Overall Coverage</a> &gt; <a href="../index.html" class="el_bundle">jooq-pg</a> &gt; <a href="index.source.html" class="el_package">org.ehrbase.jooq.pg.tables</a> &gt; <span class="el_source">CompExpand.java</span></div><h1>CompExpand.java</h1><pre class="source lang-java linenums">/*
 * This file is generated by jOOQ.
 */
package org.ehrbase.jooq.pg.tables;


import java.sql.Timestamp;
import java.util.UUID;

import org.ehrbase.jooq.pg.Ehr;
import org.ehrbase.jooq.pg.tables.records.CompExpandRecord;
import org.jooq.Field;
import org.jooq.ForeignKey;
import org.jooq.JSONB;
import org.jooq.Name;
import org.jooq.Record;
import org.jooq.Schema;
import org.jooq.Table;
import org.jooq.TableField;
import org.jooq.TableOptions;
import org.jooq.impl.DSL;
import org.jooq.impl.SQLDataType;
import org.jooq.impl.TableImpl;


/**
 * This class is generated by jOOQ.
 */
@SuppressWarnings({ &quot;all&quot;, &quot;unchecked&quot;, &quot;rawtypes&quot; })
public class CompExpand extends TableImpl&lt;CompExpandRecord&gt; {

    private static final long serialVersionUID = 1L;

    /**
     * The reference instance of &lt;code&gt;ehr.comp_expand&lt;/code&gt;
     */
<span class="fc" id="L37">    public static final CompExpand COMP_EXPAND = new CompExpand();</span>

    /**
     * The class holding records for this type
     */
    @Override
    public Class&lt;CompExpandRecord&gt; getRecordType() {
<span class="nc" id="L44">        return CompExpandRecord.class;</span>
    }

    /**
     * The column &lt;code&gt;ehr.comp_expand.ehr_id&lt;/code&gt;.
     */
<span class="pc" id="L50">    public final TableField&lt;CompExpandRecord, UUID&gt; EHR_ID = createField(DSL.name(&quot;ehr_id&quot;), SQLDataType.UUID, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.subject_externalref_id_value&lt;/code&gt;.
     */
<span class="pc" id="L55">    public final TableField&lt;CompExpandRecord, String&gt; SUBJECT_EXTERNALREF_ID_VALUE = createField(DSL.name(&quot;subject_externalref_id_value&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.subject_externalref_id_namespace&lt;/code&gt;.
     */
<span class="pc" id="L60">    public final TableField&lt;CompExpandRecord, String&gt; SUBJECT_EXTERNALREF_ID_NAMESPACE = createField(DSL.name(&quot;subject_externalref_id_namespace&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.composition_id&lt;/code&gt;.
     */
<span class="pc" id="L65">    public final TableField&lt;CompExpandRecord, UUID&gt; COMPOSITION_ID = createField(DSL.name(&quot;composition_id&quot;), SQLDataType.UUID, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.template_id&lt;/code&gt;.
     */
<span class="pc" id="L70">    public final TableField&lt;CompExpandRecord, String&gt; TEMPLATE_ID = createField(DSL.name(&quot;template_id&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.archetype_id&lt;/code&gt;.
     */
<span class="pc" id="L75">    public final TableField&lt;CompExpandRecord, String&gt; ARCHETYPE_ID = createField(DSL.name(&quot;archetype_id&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.entry&lt;/code&gt;.
     */
<span class="pc" id="L80">    public final TableField&lt;CompExpandRecord, JSONB&gt; ENTRY = createField(DSL.name(&quot;entry&quot;), SQLDataType.JSONB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.composition_name&lt;/code&gt;.
     */
<span class="pc" id="L85">    public final TableField&lt;CompExpandRecord, String&gt; COMPOSITION_NAME = createField(DSL.name(&quot;composition_name&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.language&lt;/code&gt;.
     */
<span class="pc" id="L90">    public final TableField&lt;CompExpandRecord, String&gt; LANGUAGE = createField(DSL.name(&quot;language&quot;), SQLDataType.VARCHAR(5), this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.territory&lt;/code&gt;.
     */
<span class="pc" id="L95">    public final TableField&lt;CompExpandRecord, Integer&gt; TERRITORY = createField(DSL.name(&quot;territory&quot;), SQLDataType.INTEGER, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.start_time&lt;/code&gt;.
     */
<span class="pc" id="L100">    public final TableField&lt;CompExpandRecord, Timestamp&gt; START_TIME = createField(DSL.name(&quot;start_time&quot;), SQLDataType.TIMESTAMP(6), this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.start_time_tzid&lt;/code&gt;.
     */
<span class="pc" id="L105">    public final TableField&lt;CompExpandRecord, String&gt; START_TIME_TZID = createField(DSL.name(&quot;start_time_tzid&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.end_time&lt;/code&gt;.
     */
<span class="pc" id="L110">    public final TableField&lt;CompExpandRecord, Timestamp&gt; END_TIME = createField(DSL.name(&quot;end_time&quot;), SQLDataType.TIMESTAMP(6), this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.end_time_tzid&lt;/code&gt;.
     */
<span class="pc" id="L115">    public final TableField&lt;CompExpandRecord, String&gt; END_TIME_TZID = createField(DSL.name(&quot;end_time_tzid&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.other_context&lt;/code&gt;.
     */
<span class="pc" id="L120">    public final TableField&lt;CompExpandRecord, JSONB&gt; OTHER_CONTEXT = createField(DSL.name(&quot;other_context&quot;), SQLDataType.JSONB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.ctx_location&lt;/code&gt;.
     */
<span class="pc" id="L125">    public final TableField&lt;CompExpandRecord, String&gt; CTX_LOCATION = createField(DSL.name(&quot;ctx_location&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.facility_name&lt;/code&gt;.
     */
<span class="pc" id="L130">    public final TableField&lt;CompExpandRecord, String&gt; FACILITY_NAME = createField(DSL.name(&quot;facility_name&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.facility_ref&lt;/code&gt;.
     */
<span class="pc" id="L135">    public final TableField&lt;CompExpandRecord, String&gt; FACILITY_REF = createField(DSL.name(&quot;facility_ref&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.facility_scheme&lt;/code&gt;.
     */
<span class="pc" id="L140">    public final TableField&lt;CompExpandRecord, String&gt; FACILITY_SCHEME = createField(DSL.name(&quot;facility_scheme&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.facility_namespace&lt;/code&gt;.
     */
<span class="pc" id="L145">    public final TableField&lt;CompExpandRecord, String&gt; FACILITY_NAMESPACE = createField(DSL.name(&quot;facility_namespace&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.facility_type&lt;/code&gt;.
     */
<span class="pc" id="L150">    public final TableField&lt;CompExpandRecord, String&gt; FACILITY_TYPE = createField(DSL.name(&quot;facility_type&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.composer_name&lt;/code&gt;.
     */
<span class="pc" id="L155">    public final TableField&lt;CompExpandRecord, String&gt; COMPOSER_NAME = createField(DSL.name(&quot;composer_name&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.composer_ref&lt;/code&gt;.
     */
<span class="pc" id="L160">    public final TableField&lt;CompExpandRecord, String&gt; COMPOSER_REF = createField(DSL.name(&quot;composer_ref&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.composer_scheme&lt;/code&gt;.
     */
<span class="pc" id="L165">    public final TableField&lt;CompExpandRecord, String&gt; COMPOSER_SCHEME = createField(DSL.name(&quot;composer_scheme&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.composer_namespace&lt;/code&gt;.
     */
<span class="pc" id="L170">    public final TableField&lt;CompExpandRecord, String&gt; COMPOSER_NAMESPACE = createField(DSL.name(&quot;composer_namespace&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    /**
     * The column &lt;code&gt;ehr.comp_expand.composer_type&lt;/code&gt;.
     */
<span class="pc" id="L175">    public final TableField&lt;CompExpandRecord, String&gt; COMPOSER_TYPE = createField(DSL.name(&quot;composer_type&quot;), SQLDataType.CLOB, this, &quot;&quot;);</span>

    private CompExpand(Name alias, Table&lt;CompExpandRecord&gt; aliased) {
<span class="fc" id="L178">        this(alias, aliased, null);</span>
<span class="fc" id="L179">    }</span>

    private CompExpand(Name alias, Table&lt;CompExpandRecord&gt; aliased, Field&lt;?&gt;[] parameters) {
<span class="fc" id="L182">        super(alias, null, aliased, parameters, DSL.comment(&quot;&quot;), TableOptions.view(&quot;&quot;&quot;</span>
        create view &quot;comp_expand&quot; as  SELECT ehr.id AS ehr_id,
         party.party_ref_value AS subject_externalref_id_value,
         party.party_ref_namespace AS subject_externalref_id_namespace,
         entry.composition_id,
         entry.template_id,
         entry.archetype_id,
         entry.entry,
         TRIM(LEADING ''''::text FROM TRIM(TRAILING ''']'::text FROM (regexp_split_to_array(json_object_keys((entry.entry)::json), 'and name/value='::text))[2])) AS composition_name,
         compo.language,
         compo.territory,
         ctx.start_time,
         ctx.start_time_tzid,
         ctx.end_time,
         ctx.end_time_tzid,
         ctx.other_context,
         ctx.location AS ctx_location,
         fclty.name AS facility_name,
         fclty.party_ref_value AS facility_ref,
         fclty.party_ref_scheme AS facility_scheme,
         fclty.party_ref_namespace AS facility_namespace,
         fclty.party_ref_type AS facility_type,
         compr.name AS composer_name,
         compr.party_ref_value AS composer_ref,
         compr.party_ref_scheme AS composer_scheme,
         compr.party_ref_namespace AS composer_namespace,
         compr.party_ref_type AS composer_type
        FROM (((((((ehr.entry
          JOIN ehr.composition compo ON ((compo.id = entry.composition_id)))
          JOIN ehr.event_context ctx ON ((ctx.composition_id = entry.composition_id)))
          JOIN ehr.party_identified compr ON ((compo.composer = compr.id)))
          JOIN ehr.ehr ehr ON ((ehr.id = compo.ehr_id)))
          JOIN ehr.status status ON ((status.ehr_id = ehr.id)))
          LEFT JOIN ehr.party_identified party ON ((status.party = party.id)))
          LEFT JOIN ehr.party_identified fclty ON ((ctx.facility = fclty.id)));
        &quot;&quot;&quot;));
<span class="fc" id="L218">    }</span>

    /**
     * Create an aliased &lt;code&gt;ehr.comp_expand&lt;/code&gt; table reference
     */
    public CompExpand(String alias) {
<span class="nc" id="L224">        this(DSL.name(alias), COMP_EXPAND);</span>
<span class="nc" id="L225">    }</span>

    /**
     * Create an aliased &lt;code&gt;ehr.comp_expand&lt;/code&gt; table reference
     */
    public CompExpand(Name alias) {
<span class="nc" id="L231">        this(alias, COMP_EXPAND);</span>
<span class="nc" id="L232">    }</span>

    /**
     * Create a &lt;code&gt;ehr.comp_expand&lt;/code&gt; table reference
     */
    public CompExpand() {
<span class="fc" id="L238">        this(DSL.name(&quot;comp_expand&quot;), null);</span>
<span class="fc" id="L239">    }</span>

    public &lt;O extends Record&gt; CompExpand(Table&lt;O&gt; child, ForeignKey&lt;O, CompExpandRecord&gt; key) {
<span class="nc" id="L242">        super(child, key, COMP_EXPAND);</span>
<span class="nc" id="L243">    }</span>

    @Override
    public Schema getSchema() {
<span class="nc bnc" id="L247" title="All 2 branches missed.">        return aliased() ? null : Ehr.EHR;</span>
    }

    @Override
    public CompExpand as(String alias) {
<span class="nc" id="L252">        return new CompExpand(DSL.name(alias), this);</span>
    }

    @Override
    public CompExpand as(Name alias) {
<span class="nc" id="L257">        return new CompExpand(alias, this);</span>
    }

    @Override
    public CompExpand as(Table&lt;?&gt; alias) {
<span class="nc" id="L262">        return new CompExpand(alias.getQualifiedName(), this);</span>
    }

    /**
     * Rename this table
     */
    @Override
    public CompExpand rename(String name) {
<span class="nc" id="L270">        return new CompExpand(DSL.name(name), null);</span>
    }

    /**
     * Rename this table
     */
    @Override
    public CompExpand rename(Name name) {
<span class="nc" id="L278">        return new CompExpand(name, null);</span>
    }

    /**
     * Rename this table
     */
    @Override
    public CompExpand rename(Table&lt;?&gt; name) {
<span class="nc" id="L286">        return new CompExpand(name.getQualifiedName(), null);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>