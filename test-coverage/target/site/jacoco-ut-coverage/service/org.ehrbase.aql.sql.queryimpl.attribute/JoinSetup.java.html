<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>JoinSetup.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Coverage with Unit Tests</a> &gt; <a href="../index.html" class="el_bundle">service</a> &gt; <a href="index.source.html" class="el_package">org.ehrbase.aql.sql.queryimpl.attribute</a> &gt; <span class="el_source">JoinSetup.java</span></div><h1>JoinSetup.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2019 vitasystems GmbH and Hannover Medical School.
 *
 * This file is part of project EHRbase
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.ehrbase.aql.sql.queryimpl.attribute;

import org.jooq.Table;

/**
 * this class maintains the state of joins to build depending on the selected attributes
 */
@SuppressWarnings({&quot;java:S3776&quot;, &quot;java:S3740&quot;, &quot;java:S1452&quot;, &quot;java:S1075&quot;})
<span class="fc" id="L26">public class JoinSetup {</span>
    // boolean indicating the resulting joins to generate
<span class="fc" id="L28">    private boolean joinComposition = false;</span>
<span class="fc" id="L29">    private boolean joinEventContext = false;</span>
<span class="fc" id="L30">    private boolean joinSubject = false;</span>
<span class="fc" id="L31">    private boolean joinEhr = false;</span>
<span class="fc" id="L32">    private boolean joinEhrStatus = false;</span>
<span class="fc" id="L33">    private boolean joinComposer = false;</span>
<span class="fc" id="L34">    private boolean joinContextFacility = false;</span>
<span class="fc" id="L35">    private boolean joinSystem = false;</span>
<span class="fc" id="L36">    private boolean containsEhrStatus = false;</span>

<span class="fc" id="L38">    private boolean useEntry = false;</span>

    protected Table
            partyJoinRef; // this table reference is used by forTableField() it indicates on which table the join is to
    // be done

    public boolean isJoinComposition() {
<span class="fc" id="L45">        return joinComposition;</span>
    }

    public void setJoinComposition(boolean joinComposition) {
<span class="fc" id="L49">        this.joinComposition = joinComposition;</span>
<span class="fc" id="L50">    }</span>

    public boolean isJoinEventContext() {
<span class="fc" id="L53">        return joinEventContext;</span>
    }

    public void setJoinEventContext(boolean joinEventContext) {
<span class="fc" id="L57">        this.joinEventContext = joinEventContext;</span>
<span class="fc" id="L58">    }</span>

    public boolean isJoinSubject() {
<span class="fc" id="L61">        return joinSubject;</span>
    }

    public void setJoinSubject(boolean joinSubject) {
<span class="nc" id="L65">        this.joinSubject = joinSubject;</span>
<span class="nc" id="L66">    }</span>

    public boolean isJoinEhr() {
<span class="fc" id="L69">        return joinEhr;</span>
    }

    public void setJoinEhr(boolean joinEhr) {
<span class="fc" id="L73">        this.joinEhr = joinEhr;</span>
<span class="fc" id="L74">    }</span>

    public boolean isJoinEhrStatus() {
<span class="fc" id="L77">        return joinEhrStatus;</span>
    }

    public void setJoinEhrStatus(boolean joinEhrStatus) {
<span class="fc" id="L81">        this.joinEhrStatus = joinEhrStatus;</span>
<span class="fc" id="L82">    }</span>

    public boolean isJoinComposer() {
<span class="fc" id="L85">        return joinComposer;</span>
    }

    public void setJoinComposer(boolean joinComposer) {
<span class="fc" id="L89">        this.joinComposer = joinComposer;</span>
<span class="fc" id="L90">    }</span>

    public boolean isJoinContextFacility() {
<span class="fc" id="L93">        return joinContextFacility;</span>
    }

    public void setJoinContextFacility(boolean joinContextFacility) {
<span class="nc" id="L97">        this.joinContextFacility = joinContextFacility;</span>
<span class="nc" id="L98">    }</span>

    public boolean isContainsEhrStatus() {
<span class="fc" id="L101">        return containsEhrStatus;</span>
    }

    public void setContainsEhrStatus(boolean containsEhrStatus) {
<span class="fc" id="L105">        this.containsEhrStatus = containsEhrStatus;</span>
<span class="fc" id="L106">    }</span>

    public Table getPartyJoinRef() {
<span class="fc" id="L109">        return partyJoinRef;</span>
    }

    public void setPartyJoinRef(Table partyJoinRef) {
<span class="fc" id="L113">        this.partyJoinRef = partyJoinRef;</span>
<span class="fc" id="L114">    }</span>

    public void setJoinSystem(boolean b) {
<span class="nc" id="L117">        this.joinSystem = b;</span>
<span class="nc" id="L118">    }</span>

    public boolean isJoinSystem() {
<span class="fc" id="L121">        return joinSystem;</span>
    }

    public void setUseEntry(boolean useEntry) {
<span class="fc" id="L125">        this.useEntry = useEntry;</span>
<span class="fc" id="L126">    }</span>

    public boolean isUseEntry() {
<span class="fc" id="L129">        return useEntry;</span>
    }

    public JoinSetup merge(JoinSetup anotherJoinSetup) {
<span class="fc bfc" id="L133" title="All 4 branches covered.">        joinComposition = joinComposition || anotherJoinSetup.isJoinComposition();</span>
<span class="fc bfc" id="L134" title="All 4 branches covered.">        joinComposer = joinComposer || anotherJoinSetup.isJoinComposer();</span>
<span class="fc bfc" id="L135" title="All 4 branches covered.">        joinEventContext = joinEventContext || anotherJoinSetup.isJoinEventContext();</span>
<span class="pc bpc" id="L136" title="2 of 4 branches missed.">        joinSubject = joinSubject || anotherJoinSetup.isJoinSubject();</span>
<span class="fc bfc" id="L137" title="All 4 branches covered.">        joinEhr = joinEhr || anotherJoinSetup.isJoinEhr();</span>
<span class="pc bpc" id="L138" title="1 of 4 branches missed.">        joinEhrStatus = joinEhrStatus || anotherJoinSetup.isJoinEhrStatus();</span>
<span class="pc bpc" id="L139" title="1 of 4 branches missed.">        joinComposer = joinComposer || anotherJoinSetup.joinComposer;</span>
<span class="pc bpc" id="L140" title="2 of 4 branches missed.">        joinContextFacility = joinContextFacility || anotherJoinSetup.isJoinContextFacility();</span>
<span class="pc bpc" id="L141" title="2 of 4 branches missed.">        joinSystem = joinSystem || anotherJoinSetup.isJoinSystem();</span>
<span class="pc bpc" id="L142" title="1 of 4 branches missed.">        containsEhrStatus = containsEhrStatus || anotherJoinSetup.isContainsEhrStatus();</span>
<span class="fc bfc" id="L143" title="All 4 branches covered.">        useEntry = useEntry || anotherJoinSetup.isUseEntry();</span>

<span class="fc" id="L145">        return this;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>